{
  "name": "date-time-range-field-primitive",
  "type": "registry:ui",
  "dependencies": [
    "@radix-ui/react-compose-refs",
    "@radix-ui/react-primitive",
    "timescape"
  ],
  "files": [
    {
      "path": "ui/date-time-range-field-primitive.tsx",
      "content": "import * as React from \"react\"\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\"\nimport { Primitive } from \"@radix-ui/react-primitive\"\n\nimport {\n  useTimescapeRange,\n  UseTimescapeRangeOptions,\n} from \"@/registry/new-york/hooks/use-timescape\"\n\nexport type DateTimeRangeFieldContextProps = {\n  disabled?: boolean\n} & ReturnType<typeof useTimescapeRange>\n\nconst DateTimeRangeFieldContext =\n  React.createContext<DateTimeRangeFieldContextProps>({\n    from: {\n      getInputProps: () => ({ ref: () => null }),\n      options: {},\n    },\n    to: {\n      getInputProps: () => ({ ref: () => null }),\n      options: {},\n    },\n    getRootProps: () => ({ ref: () => null }),\n    disabled: false,\n  })\n\nexport const useDateTimeRangeFieldContext = () =>\n  React.useContext(DateTimeRangeFieldContext)\n\nexport interface DateTimeRangeFieldProps\n  extends UseTimescapeRangeOptions,\n    Omit<\n      React.ComponentPropsWithoutRef<typeof Primitive.div>,\n      \"value\" | \"defaultValue\"\n    > {\n  disabled?: boolean\n}\n\nexport const DateTimeRangeField = React.forwardRef<\n  React.ElementRef<typeof Primitive.div>,\n  DateTimeRangeFieldProps\n>(\n  (\n    {\n      value,\n      defaultValue,\n      onValueChange,\n      disabled,\n      digits,\n      hour12,\n      maxDate,\n      minDate,\n      snapToStep,\n      wheelControl,\n      wrapAround,\n      from,\n      to,\n      ...props\n    },\n    ref\n  ) => {\n    const timescape = useTimescapeRange({\n      value,\n      defaultValue,\n      onValueChange,\n      digits,\n      hour12,\n      maxDate,\n      minDate,\n      snapToStep,\n      wheelControl,\n      wrapAround,\n      from,\n      to,\n    })\n\n    const { ref: rootRef, ...rootProps } = timescape.getRootProps()\n\n    const composedRefs = useComposedRefs(ref, (node) => rootRef(node)!)\n\n    return (\n      <DateTimeRangeFieldContext.Provider value={{ ...timescape, disabled }}>\n        <Primitive.div\n          ref={composedRefs}\n          data-disabled={disabled}\n          {...rootProps}\n          {...props}\n        />\n      </DateTimeRangeFieldContext.Provider>\n    )\n  }\n)\nDateTimeRangeField.displayName = \"DateTimeRangeField\"\n\nexport const DateTimeRangeFieldSeparator = React.forwardRef<\n  React.ElementRef<typeof Primitive.span>,\n  React.ComponentPropsWithoutRef<typeof Primitive.span>\n>((props, ref) => {\n  const { disabled } = useDateTimeRangeFieldContext()\n\n  return (\n    <Primitive.span\n      ref={ref}\n      aria-hidden=\"true\"\n      data-disabled={disabled}\n      {...props}\n    />\n  )\n})\nDateTimeRangeFieldSeparator.displayName = \"DateTimeRangeFieldSeparator\"\n\nconst DateTimeRangeFieldFromContext = React.createContext(false)\n\nexport const DateTimeRangeFieldFrom = React.forwardRef<\n  React.ElementRef<typeof Primitive.div>,\n  React.ComponentPropsWithoutRef<typeof Primitive.div>\n>((props, ref) => (\n  <DateTimeRangeFieldFromContext.Provider value={true}>\n    <Primitive.div ref={ref} {...props} />\n  </DateTimeRangeFieldFromContext.Provider>\n))\nDateTimeRangeFieldFrom.displayName = \"DateTimeRangeFieldFrom\"\n\nconst DateTimeRangeFieldToContext = React.createContext(false)\n\nexport const DateTimeRangeFieldTo = React.forwardRef<\n  React.ElementRef<typeof Primitive.div>,\n  React.ComponentPropsWithoutRef<typeof Primitive.div>\n>((props, ref) => (\n  <DateTimeRangeFieldToContext.Provider value={true}>\n    <Primitive.div ref={ref} {...props} />\n  </DateTimeRangeFieldToContext.Provider>\n))\nDateTimeRangeFieldTo.displayName = \"DateTimeRangeFieldTo\"\n\nconst useDateTimeFieldSegmentContext = () => {\n  const isFrom = React.useContext(DateTimeRangeFieldFromContext)\n  const isTo = React.useContext(DateTimeRangeFieldToContext)\n  const { disabled, from, to } = useDateTimeRangeFieldContext()\n\n  if (!isFrom && !isTo) {\n    throw new Error(\n      \"useDateTimeFieldSegmentContext should be used within <DateTimeRangeFieldFrom> or <DateTimeRangeFieldTo> components\"\n    )\n  }\n\n  return {\n    ...(isFrom ? from : to),\n    disabled,\n  }\n}\n\nexport const DateTimeRangeFieldYears = React.forwardRef<\n  React.ElementRef<typeof Primitive.input>,\n  React.ComponentPropsWithoutRef<typeof Primitive.input>\n>(({ disabled: disabledProp, ...props }, ref) => {\n  const { getInputProps, disabled } = useDateTimeFieldSegmentContext()\n\n  const { ref: inputRef, ...inputProps } = getInputProps(\"years\")\n\n  const composedRefs = useComposedRefs(ref, inputRef)\n\n  return (\n    <Primitive.input\n      ref={composedRefs}\n      {...inputProps}\n      disabled={disabled || disabledProp}\n      {...props}\n    />\n  )\n})\nDateTimeRangeFieldYears.displayName = \"DateTimeRangeFieldYears\"\n\nexport const DateTimeRangeFieldMonths = React.forwardRef<\n  React.ElementRef<typeof Primitive.input>,\n  React.ComponentPropsWithoutRef<typeof Primitive.input>\n>(({ disabled: disabledProp, ...props }, ref) => {\n  const { getInputProps, disabled } = useDateTimeFieldSegmentContext()\n\n  const { ref: inputRef, ...inputProps } = getInputProps(\"months\")\n\n  const composedRefs = useComposedRefs(ref, inputRef)\n\n  return (\n    <Primitive.input\n      ref={composedRefs}\n      {...inputProps}\n      disabled={disabled || disabledProp}\n      {...props}\n    />\n  )\n})\nDateTimeRangeFieldMonths.displayName = \"DateTimeRangeFieldMonths\"\n\nexport const DateTimeRangeFieldDays = React.forwardRef<\n  React.ElementRef<typeof Primitive.input>,\n  React.ComponentPropsWithoutRef<typeof Primitive.input>\n>(({ disabled: disabledProp, ...props }, ref) => {\n  const { getInputProps, disabled } = useDateTimeFieldSegmentContext()\n\n  const { ref: inputRef, ...inputProps } = getInputProps(\"days\")\n\n  const composedRefs = useComposedRefs(ref, inputRef)\n\n  return (\n    <Primitive.input\n      ref={composedRefs}\n      {...inputProps}\n      disabled={disabled || disabledProp}\n      {...props}\n    />\n  )\n})\nDateTimeRangeFieldDays.displayName = \"DateTimeRangeFieldDays\"\n\nexport const DateTimeRangeFieldHours = React.forwardRef<\n  React.ElementRef<typeof Primitive.input>,\n  React.ComponentPropsWithoutRef<typeof Primitive.input>\n>(({ disabled: disabledProp, ...props }, ref) => {\n  const { getInputProps, disabled } = useDateTimeFieldSegmentContext()\n\n  const { ref: inputRef, ...inputProps } = getInputProps(\"hours\")\n\n  const composedRefs = useComposedRefs(ref, inputRef)\n\n  return (\n    <Primitive.input\n      ref={composedRefs}\n      {...inputProps}\n      disabled={disabled || disabledProp}\n      {...props}\n    />\n  )\n})\nDateTimeRangeFieldHours.displayName = \"DateTimeRangeFieldHours\"\n\nexport const DateTimeRangeFieldMinutes = React.forwardRef<\n  React.ElementRef<typeof Primitive.input>,\n  React.ComponentPropsWithoutRef<typeof Primitive.input>\n>(({ disabled: disabledProp, ...props }, ref) => {\n  const { getInputProps, disabled } = useDateTimeFieldSegmentContext()\n\n  const { ref: inputRef, ...inputProps } = getInputProps(\"minutes\")\n\n  const composedRefs = useComposedRefs(ref, inputRef)\n\n  return (\n    <Primitive.input\n      ref={composedRefs}\n      {...inputProps}\n      disabled={disabled || disabledProp}\n      {...props}\n    />\n  )\n})\nDateTimeRangeFieldMinutes.displayName = \"DateTimeRangeFieldMinutes\"\n\nexport const DateTimeRangeFieldSeconds = React.forwardRef<\n  React.ElementRef<typeof Primitive.input>,\n  React.ComponentPropsWithoutRef<typeof Primitive.input>\n>(({ disabled: disabledProp, ...props }, ref) => {\n  const { getInputProps, disabled } = useDateTimeFieldSegmentContext()\n\n  const { ref: inputRef, ...inputProps } = getInputProps(\"seconds\")\n\n  const composedRefs = useComposedRefs(ref, inputRef)\n\n  return (\n    <Primitive.input\n      ref={composedRefs}\n      {...inputProps}\n      disabled={disabled || disabledProp}\n      {...props}\n    />\n  )\n})\nDateTimeRangeFieldSeconds.displayName = \"DateTimeRangeFieldSeconds\"\n\nexport const DateTimeRangeFieldAmPm = React.forwardRef<\n  React.ElementRef<typeof Primitive.input>,\n  React.ComponentPropsWithoutRef<typeof Primitive.input>\n>(({ disabled: disabledProp, ...props }, ref) => {\n  const { getInputProps, options, disabled } = useDateTimeFieldSegmentContext()\n\n  const { ref: inputRef, ...inputProps } = getInputProps(\"am/pm\")\n\n  const composedRefs = useComposedRefs(ref, inputRef)\n\n  if (!options?.hour12) {\n    return null\n  }\n\n  return (\n    <Primitive.input\n      ref={composedRefs}\n      {...inputProps}\n      disabled={disabled || disabledProp}\n      {...props}\n    />\n  )\n})\nDateTimeRangeFieldAmPm.displayName = \"DateTimeRangeFieldAmPm\"\n\nconst Root = DateTimeRangeField\nconst From = DateTimeRangeFieldFrom\nconst To = DateTimeRangeFieldTo\nconst Separator = DateTimeRangeFieldSeparator\nconst Years = DateTimeRangeFieldYears\nconst Months = DateTimeRangeFieldMonths\nconst Days = DateTimeRangeFieldDays\nconst Hours = DateTimeRangeFieldHours\nconst Minutes = DateTimeRangeFieldMinutes\nconst Seconds = DateTimeRangeFieldSeconds\nconst AmPm = DateTimeRangeFieldAmPm\n\nexport {\n  Root,\n  From,\n  To,\n  Separator,\n  Years,\n  Months,\n  Days,\n  Hours,\n  Minutes,\n  Seconds,\n  AmPm,\n}\n",
      "type": "registry:ui"
    },
    {
      "path": "hooks/use-timescape.ts",
      "content": "import * as React from \"react\"\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\"\nimport { DateRange } from \"react-day-picker\"\nimport {\n  Options,\n  useTimescape as useReactTimescape,\n  useTimescapeRange as useReactTimescapeRange,\n} from \"timescape/react\"\n\nexport type TimescapeOptions = Omit<Options, \"date\" | \"onChangeDate\">\n\nexport interface UseTimescapeOptions extends TimescapeOptions {\n  value?: Date | null\n  defaultValue?: Date\n  onValueChange?: (value: Date | null) => void\n}\n\nexport const useTimescape = ({\n  value: valueProp,\n  defaultValue,\n  onValueChange,\n  digits,\n  hour12,\n  maxDate,\n  minDate,\n  snapToStep,\n  wheelControl,\n  wrapAround,\n}: UseTimescapeOptions) => {\n  const [value, setValue] = useControllableState({\n    prop: valueProp,\n    defaultProp: defaultValue,\n    onChange: onValueChange,\n  })\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const { update, _manager, ...timescape } = useReactTimescape({\n    date: !value ? undefined : value, // This is the initial value.\n    onChangeDate: setValue,\n    digits,\n    hour12,\n    maxDate,\n    minDate,\n    snapToStep,\n    wheelControl,\n    wrapAround,\n    // Partial input does not work with reactive value at the moment.\n    // For more information, see https://github.com/dan-lee/timescape/issues/51.\n    disallowPartial: true,\n  })\n\n  React.useEffect(() => {\n    update((prevOptions) => ({\n      ...prevOptions,\n      date: !value ? undefined : value,\n    }))\n  }, [value, update])\n\n  React.useEffect(() => {\n    update((prevOptions) => ({ ...prevOptions, digits }))\n  }, [digits, update])\n\n  React.useEffect(() => {\n    update((prevOptions) => ({ ...prevOptions, hour12 }))\n  }, [hour12, update])\n\n  React.useEffect(() => {\n    update((prevOptions) => ({ ...prevOptions, maxDate }))\n  }, [maxDate, update])\n\n  React.useEffect(() => {\n    update((prevOptions) => ({ ...prevOptions, minDate }))\n  }, [minDate, update])\n\n  React.useEffect(() => {\n    update((prevOptions) => ({ ...prevOptions, snapToStep }))\n  }, [snapToStep, update])\n\n  React.useEffect(() => {\n    update((prevOptions) => ({ ...prevOptions, wheelControl }))\n  }, [wheelControl, update])\n\n  React.useEffect(() => {\n    update((prevOptions) => ({ ...prevOptions, wrapAround }))\n  }, [wrapAround, update])\n\n  return timescape\n}\n\nexport interface UseTimescapeRangeOptions extends TimescapeOptions {\n  value?: DateRange | null\n  defaultValue?: DateRange\n  onValueChange?: (value: DateRange | null) => void\n  from?: TimescapeOptions\n  to?: TimescapeOptions\n}\n\nexport const useTimescapeRange = ({\n  value: valueProp,\n  defaultValue,\n  onValueChange,\n  digits,\n  hour12,\n  maxDate,\n  minDate,\n  snapToStep,\n  wheelControl,\n  wrapAround,\n  from: fromOptions = {},\n  to: toOptions = {},\n}: UseTimescapeRangeOptions) => {\n  const [value, setValue] = useControllableState({\n    prop: valueProp,\n    defaultProp: defaultValue,\n    onChange: onValueChange,\n  })\n\n  const { from, to, ...timescape } = useReactTimescapeRange({\n    from: {\n      date: !value?.from ? undefined : value.from, // This is the initial value.\n      onChangeDate: (from) =>\n        setValue((prevValue) => ({ from, to: prevValue?.to })),\n      digits,\n      hour12,\n      maxDate,\n      minDate,\n      snapToStep,\n      wheelControl,\n      wrapAround,\n      // Partial input does not work with reactive value at the moment.\n      // For more information, see https://github.com/dan-lee/timescape/issues/51.\n      disallowPartial: true,\n      ...fromOptions,\n    },\n    to: {\n      date: !value?.to ? undefined : value.to, // This is the initial value.\n      onChangeDate: (to) =>\n        setValue((prevValue) => ({ from: prevValue?.from, to })),\n      digits,\n      hour12,\n      maxDate,\n      minDate,\n      snapToStep,\n      wheelControl,\n      wrapAround,\n      // Partial input does not work with reactive value at the moment.\n      // For more information, see https://github.com/dan-lee/timescape/issues/51.\n      disallowPartial: true,\n      ...toOptions,\n    },\n  })\n\n  // ----------------------------------------------------------------------------\n  // Sync `from`\n  // ----------------------------------------------------------------------------\n\n  const { update: fromUpdate, ...fromTimescape } = from\n\n  React.useEffect(() => {\n    fromUpdate((prevOptions) => ({\n      ...prevOptions,\n      digits: fromOptions.digits ?? digits,\n    }))\n  }, [digits, fromOptions.digits, fromUpdate])\n\n  React.useEffect(() => {\n    fromUpdate((prevOptions) => ({\n      ...prevOptions,\n      hour12: fromOptions.hour12 ?? hour12,\n    }))\n  }, [hour12, fromOptions.hour12, fromUpdate])\n\n  React.useEffect(() => {\n    fromUpdate((prevOptions) => ({\n      ...prevOptions,\n      maxDate: fromOptions.maxDate ?? maxDate,\n    }))\n  }, [maxDate, fromOptions.maxDate, fromUpdate])\n\n  React.useEffect(() => {\n    fromUpdate((prevOptions) => ({\n      ...prevOptions,\n      minDate: fromOptions.minDate ?? minDate,\n    }))\n  }, [minDate, fromOptions.minDate, fromUpdate])\n\n  React.useEffect(() => {\n    fromUpdate((prevOptions) => ({\n      ...prevOptions,\n      snapToStep: fromOptions.snapToStep ?? snapToStep,\n    }))\n  }, [snapToStep, fromOptions.snapToStep, fromUpdate])\n\n  React.useEffect(() => {\n    fromUpdate((prevOptions) => ({\n      ...prevOptions,\n      wheelControl: fromOptions.wheelControl ?? wheelControl,\n    }))\n  }, [wheelControl, fromOptions.wheelControl, fromUpdate])\n\n  React.useEffect(() => {\n    fromUpdate((prevOptions) => ({\n      ...prevOptions,\n      wrapAround: fromOptions.wrapAround ?? wrapAround,\n    }))\n  }, [wrapAround, fromOptions.wrapAround, fromUpdate])\n\n  // ----------------------------------------------------------------------------\n  // Sync `to`\n  // ----------------------------------------------------------------------------\n\n  const { update: toUpdate, ...toTimescape } = to\n\n  React.useEffect(() => {\n    toUpdate((prevOptions) => ({\n      ...prevOptions,\n      digits: toOptions.digits ?? digits,\n    }))\n  }, [digits, toOptions.digits, toUpdate])\n\n  React.useEffect(() => {\n    toUpdate((prevOptions) => ({\n      ...prevOptions,\n      hour12: toOptions.hour12 ?? hour12,\n    }))\n  }, [hour12, toOptions.hour12, toUpdate])\n\n  React.useEffect(() => {\n    toUpdate((prevOptions) => ({\n      ...prevOptions,\n      maxDate: toOptions.maxDate ?? maxDate,\n    }))\n  }, [maxDate, toOptions.maxDate, toUpdate])\n\n  React.useEffect(() => {\n    toUpdate((prevOptions) => ({\n      ...prevOptions,\n      minDate: toOptions.minDate ?? minDate,\n    }))\n  }, [minDate, toOptions.minDate, toUpdate])\n\n  React.useEffect(() => {\n    toUpdate((prevOptions) => ({\n      ...prevOptions,\n      snapToStep: toOptions.snapToStep ?? snapToStep,\n    }))\n  }, [snapToStep, toOptions.snapToStep, toUpdate])\n\n  React.useEffect(() => {\n    toUpdate((prevOptions) => ({\n      ...prevOptions,\n      wheelControl: toOptions.wheelControl ?? wheelControl,\n    }))\n  }, [wheelControl, toOptions.wheelControl, toUpdate])\n\n  React.useEffect(() => {\n    toUpdate((prevOptions) => ({\n      ...prevOptions,\n      wrapAround: toOptions.wrapAround ?? wrapAround,\n    }))\n  }, [wrapAround, toOptions.wrapAround, toUpdate])\n\n  // ----------------------------------------------------------------------------\n  // Sync `value`\n  // ----------------------------------------------------------------------------\n\n  React.useEffect(() => {\n    fromUpdate((prevOptions) => ({\n      ...prevOptions,\n      date: !value?.from ? undefined : value.from,\n    }))\n    toUpdate((prevOptions) => ({\n      ...prevOptions,\n      date: !value?.to ? undefined : value.to,\n    }))\n  }, [value, fromUpdate, toUpdate])\n\n  return {\n    ...timescape,\n    from: fromTimescape,\n    to: toTimescape,\n  }\n}\n",
      "type": "registry:hook"
    }
  ]
}